<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>翻转图片</title>
    <link href="../bootstrap-3.3.7-dist/css/bootstrap.min.css">
    <style>
        body{
            font-size: 0px;
        }
        .button{
            background-color: #337ab7;
            width: 100px;
            height: 100px;
            border: solid 4px black;
            margin: 0px 0px;
            outline: none;
        }
        .check2{
            width: 300px;
            height: 300px;
            margin: 0px auto;
        }
        .controlButton{
            width: 300px;
            text-align: center;
            margin: 50px auto;
        }
        .controlButton button{
            width: 100px;
            margin: 0px auto;
        }
        .title{
            margin: 0px auto;
            text-align: center;
        }
        span{
            font-size: 20px;
        }
        h1{
            font-size: 50px;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="title">
            <h1>翻转颜色小游戏</h1>
        </div>
        <div class="controlButton">
            <button id="restart"><span>重置</span></button><button id="up"><span>提高难度</span></button><button id="down"><span>降低难度</span></button>
        </div>
        <div class="check2" style="margin-top: 50px">
            <button class="button"></button>
            <button class="button"></button>
            <button class="button"></button>
            <button class="button"></button>
            <button class="button"></button>
            <button class="button"></button>
            <button class="button"></button>
            <button class="button"></button>
            <button class="button"></button>
        </div>
    </div>
    <script src="../bootstrap-3.3.7-dist/js/jquery-3.3.1.min.js"></script>
    <script src="../bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <script>
        var check2 = document.getElementsByClassName('.check2');
        check2.rowcolumn = 3;
        var sz;
        function buildSZ() {
            sz = new Array(check2.rowcolumn);
            for(var i = 0; i < check2.rowcolumn; i++){
                sz[i] = new Array(check2.rowcolumn);
                for(var j = 0; j < check2.rowcolumn; j++){
                    sz[i][j] = 0;
                }
            }
        }
        $(buildSZ());
        function up() {
            if(check2.rowcolumn == 9)
                return alert('不能再高了！');
            var width = (check2.rowcolumn + 1) * 100;
            $('.check2').css('width',width,'height',width);
            for (var i = 0; i < 2 * check2.rowcolumn + 1; i++){
                $('.check2').append('<button class="button"></button>');
            }
            check2.rowcolumn++;
            restart();
        }
        $('#up').click(up);
        $('#down').click(function () {
            if(check2.rowcolumn == 3)
                return alert('不能再低了！');
            check2.rowcolumn--;
            var width = (check2.rowcolumn) * 100;
            $('.check2').css('width',width,'height',width);
            for (var i = 0; i < 2 * check2.rowcolumn + 1; i++){
                $('.check2 button').last().remove();
            }
            restart();
        });
        function win(sz) {
            for(var i = 0; i < check2.rowcolumn; i++){
                for(var j = 0; j < check2.rowcolumn; j++){
                    if(sz[i][j] == 0)
                        return -1;
                }
            }
            return 1;
        }
        function turnMode(sz, row, column) {
            if(sz[row][column] == 1)
                sz[row][column] = 0;
            else
                sz[row][column] = 1;
        }
        function turnUDLR(row, column) {
            if(row - 1 >= 0){
                turnMode(sz, row - 1, column);
            }
            if(row + 1 < check2.rowcolumn){
                turnMode(sz, row + 1, column);
            }
            if(column - 1 >= 0){
                turnMode(sz, row, column - 1);
            }
            if(column + 1 < check2.rowcolumn){
                turnMode(sz, row, column + 1);
            }
            turnMode(sz, row, column);
        }
        function turnColorSZ(sz) {
            for(var i = 0; i < check2.rowcolumn; i++){
                for(var j = 0; j < check2.rowcolumn; j++){
                    var index = i * check2.rowcolumn + j;
                    var focus = $('.check2 button').get(index);
                    /*alert(focus);*/
                    if(sz[i][j] == 1)
                        $(focus).css('background-color','#419641');
                    else
                        $(focus).css('background-color','#337ab7');
                }
            }
        }
        function restart() {
            buildSZ();
            for(var i = 0; i < check2.rowcolumn; i++){
                for(var j = 0; j < check2.rowcolumn; j++){
                    sz[i][j] = 0;
                }
            }
            turnColorSZ(sz);
        }
        $('#restart').click(restart);
        $('.check2').on('click','button',function () {
            var position = $(this).index();
            var row, column;
            for(var i = check2.rowcolumn; i > 0; i--){
                if(position >= (i - 1) * check2.rowcolumn){
                    row = i - 1;
                    column = position - (i - 1) * check2.rowcolumn;
                    break;
                }
            }
            turnUDLR(row,column);
            turnColorSZ(sz);
            if(win(sz) == 1){
                alert("恭喜你！！");
                restart();
            }
        });
    </script>
</body>
</html>